variables:
  random: &random
    min: 0
    max: 2
    step: 1
    default: 0
  commRadius: &commRadius
    min: 2.0
    max: 10
    step: 1
    default: 1.5
              
export:
  - time
  - molecule: gossip_naive
    aggregators: [mean]
    value-filter: ONLYFINITE
  - molecule: gossip_gc
    aggregators: [mean]
    value-filter: ONLYFINITE
  - molecule: gossip_repl
    aggregators: [mean]
    value-filter: ONLYFINITE

seeds:
  scenario: *random
  simulation: *random

network-model:
  type: EuclideanDistance
  parameters: [*commRadius]
  
incarnation: scafi

pools:
  - pool: &program
    - time-distribution:
        type: ExponentialTime
        parameters: [1, 0.5, 0.5]
      type: Event
      actions:
        - type: RunScafiProgram
          parameters: [it.unibo.replicated.Gossip, 20]
  - pool: &move
    - time-distribution:
        type: ExponentialTime
        parameters: [1]
      type: Event
      actions:
        - type: RandomRoundTrip
          parameters: [40.774636, 14.485109, 40.776134, 14.398193, 40.869437, 14.475316, 10, 5]
  - pool: &changeMaxValue
    - time-distribution:
        type: Trigger
        parameters: [100]
      type: Event
      actions:
        - type: SetLocalMoleculeConcentration
          parameters: [maxsense, 100.0]

contents: &contents
  - molecule: commRadius
    concentration: *commRadius
  - molecule: n_procs_run
    concentration: 0.0
  - molecule: bandwidth_spawn
    concentration: 0.0
  - molecule: sensor
    concentration: 77.7
  - molecule: maxsense
    concentration: 200.0

environment:
  type: OSMEnvironment
  parameters: [vesuvio.pbf, false, false]

displacements:
  - in:
      type: Rectangle
      parameters: [100, 40.774636, 14.485109, 0.001, 0.001]
    programs:
      - *program
      - *changeMaxValue
      - *move
    contents: *contents